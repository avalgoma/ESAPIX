<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Mayo Format and Querying </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Mayo Format and Querying ">
    <meta name="generator" content="docfx 2.16.0.499">
    
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
  </head>
  <body data-spy="scroll" data-target="#affix">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../logo.png" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="mayoFormat.md">
              <a href="https://github.com/rexcardan/ESAPIX/blob/master/DocFX/articles/mayoFormat.md/#L1" class="btn btn-primary pull-right mobile-hide">Improve this Doc</a>
              <h1 id="mayo-format-and-querying-dvh-metrics">Mayo Format and Querying DVH Metrics</h1>
              
<p>The format of DVH queries supported in ESAPIX are defined in a <a href="https://www.ncbi.nlm.nih.gov/pubmed/26825250">paper by Mayo et al.</a>. Complex DVH queries can be consolidated into an abbreviated format which is described below.</p>
<h2 id="format-overview">Format Overview</h2>
<p>The Mayo format is broken down into the following components:</p>
<ol>
<li>Query Type <strong>Qt</strong></li>
<li>Query Value <strong>Qv</strong> (if necessary)</li>
<li>Query Units <strong>Qu</strong> (if necessary)</li>
<li>Units Desired <strong>Ud</strong></li>
</ol>
<p>They are ordered as :</p>
<pre><code class="lang-cs">QtQvQu[Ud]
</code></pre><h3 id="query-type">Query Type</h3>
<p>The query type specifies the users interest in dose, volume, compliment dose, or compliment volume. The options are :</p>
<ul>
<li>MinDose - minimum dose of the structure</li>
<li>MeanDose - average dose of the structure</li>
<li>MaxDose - maximum dose of the structure</li>
<li>D - Dose at volume (treated dose). The dose at 95% volume will report the maximum dose which covers 95 % of the volume.</li>
<li>V - Volume at dose (treated volume). The volume of 70 Gy will report the volume which recieved 70 Gy or more.</li>
<li>DC - Dose compliment at volume (cold spot of a structure). The dose compliment at 2% will give the maximum dose in the coldest 2 % of a structure.</li>
<li>CV - Compliment volume (spared volume). The compliment volume of 20 Gy will report the volume which recieved 20 Gy or less.</li>
</ul>
<h3 id="query-value">Query Value</h3>
<p>The query value specifies the numerical point at which the query will take place. This is not required for mean, min, and max dose. If you were querying the dose in Gy to 90 percent of the volume, the query value would be 90. The written value would be</p>
<pre><code class="lang-cs">D90%[Gy]
</code></pre><h3 id="query-units">Query Units</h3>
<p>Query units specifiy the units of the query value. This is not required for mean, min, and max dose. In the above example (D90%[Gy]), the unit is %. Supported units are :</p>
<p>Dose Units</p>
<ul>
<li>cGy</li>
<li>Gy</li>
<li>%</li>
</ul>
<p>Volume Units</p>
<ul>
<li>%</li>
<li>cc</li>
</ul>
<h3 id="units-desired">Units Desired</h3>
<p>The units desired specifies the units in which you want the result returned. If you wanted the percent volume receiving 95 percent of prescribed dose, you would write :</p>
<pre><code class="lang-cs">V95%[%]
</code></pre><p>where the bracketed [%] specifies the desired return units. The bracket is also necessary.</p>
<h2 id="examples">Examples</h2>
<pre><code class="lang-cs">var ps = new PlanSetup(); //Assume we got a real one from a patient
var prostate = ps.StructureSet.Structures.First(s=&gt;s.Id==&quot;Prostate&quot;);
//Max dose in gray to prostate
var max = ps.ExecuteQuery(prostate, &quot;MaxDose[Gy]&quot;);

//You can also query from multiple structures simultaneously (equivalent to a boolean OR of both structure volumes)
var leftParotid = ...
var rightParotid = ...
//Get the spared volume in cubic centimeters receiving less than 20 Gy from the combined parotid volumes
var spared = ps.ExecuteQuery(new Structure[]{leftParotid, rightParotid}, &quot;CV20Gy[cc]&quot;);
</code></pre>
            </article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
            <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
            </nav>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Copyright © 2015-2016 Microsoft<br>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>
