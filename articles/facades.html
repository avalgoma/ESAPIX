<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>ESAPIX Facades </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="ESAPIX Facades ">
    <meta name="generator" content="docfx 2.15.5.0">
    
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
  </head>
  <body data-spy="scroll" data-target="#affix">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../logo.png" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="facades.md">
              <a href="https://github.com/rexcardan/ESAPIX/blob/master/DocFX/articles/facades.md/#L1" class="btn btn-primary pull-right mobile-hide">Improve this Doc</a>
              <h1 id="facades-with-esapix">Facades with ESAPIX</h1>
              
<h2 id="why-use-facades">Why Use Facades</h2>
<p>Facades provide a layer in between you and Varian dlls. This has three main advantages:</p>
<h3 id="offline-development">Offline development</h3>
<p>You can quickly and easily develop with a quick reference to ESAPIX using NuGet. Take it on the road and don&#39;t worry about access to VMS systems for testing out ideas. Then, when you are ready, you can connect to the Varian architecture and run it without any code changes.</p>
<h3 id="unit-testing">Unit Testing</h3>
<p>You can easily develop unit tests on any VMS equivalent class using the default MSTest suite. Now you can build a robust suite of tests to make sure your application is running smooth after every build.</p>
<pre><code class="lang-cs">        [TestMethod()]
        public void IsValidNameTestFail()
        {
            //You can&#39;t do this with VMS
            var ps = new PlanSetup();
            //Can&#39;t set this either
            ps.Id = &quot;P0Prostate&quot;; //Should fail
            Assert.IsFalse(NameChecker.IsValidName(ps));
        }
</code></pre><blockquote><p>The above method shows testing a class <em>NameChecker</em> for the method <em>IsValidName</em> which takes a PlanSetup object as an input and presumably makes sure the name is compliant with set standards. </p>
</blockquote>
<h3 id="async-await-multithreading-support">Async Await Multithreading Support</h3>
<p>You don&#39;t even have to think about threads anymore. Just grab the data and work with it however you want. ESAPIX Facades take care of all of the plumbing and threading work behind the scenes. It&#39;s like magic.</p>
<pre><code class="lang-cs">        private async static void GetPatientAsync(Application app)
        {
            //Try doing this without ESAPIX (eg. crash application)
            var pat = await Task.Run(() =&gt;
            {
                return app.OpenPatientById(&quot;PHYSX_C3_DLG6X&quot;);
            });

            Console.WriteLine($&quot;{pat.Id} : {pat.LastName}, {pat.FirstName}&quot;);
        }
</code></pre><h3 id="serialization-to-json-objects">Serialization to JSON Objects</h3>
<p>Sometimes you might want to test out things away from the Aria database. Wouldn&#39;t it be great if you could save the state of objects and restore them offline? Here is how you do it in ESAPIX. We will be using the included Json.NET library to do the serialization and deserialization. ESAPIX has preconfigured settings for serialiazation and deserialization (make sure you use them or it won&#39;t work!).</p>
<pre><code class="lang-cs">//Put it into a string
var json = JsonConvert.SerializeObject(planSetup, FacadeSerializer.SerializeSettings);

//Bring it back
var planSetup = JsonConvert.DeserializeObject&lt;PlanSetup&gt;(json, FacadeSerializer.DeserializeSettings);
</code></pre>
            </article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
            <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
            </nav>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Copyright © 2015-2016 Microsoft<br>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>
